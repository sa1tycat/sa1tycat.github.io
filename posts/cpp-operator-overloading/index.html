<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="C++之运算符重载" /><meta name="author" content="saltycat" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="Operator Overloading" /><meta property="og:description" content="Operator Overloading" /><link rel="canonical" href="/posts/cpp-operator-overloading/" /><meta property="og:url" content="/posts/cpp-operator-overloading/" /><meta property="og:site_name" content="sa1tycat" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-20T16:11:25+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="C++之运算符重载" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@saltycat" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"saltycat"},"dateModified":"2022-07-20T16:11:25+08:00","datePublished":"2022-07-20T16:11:25+08:00","description":"Operator Overloading","headline":"C++之运算符重载","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/cpp-operator-overloading/"},"url":"/posts/cpp-operator-overloading/"}</script><title>C++之运算符重载 | sa1tycat</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="sa1tycat"><meta name="application-name" content="sa1tycat"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/config/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">sa1tycat</a></div><div class="site-subtitle font-italic">welcome, whatever</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/sa1tycat" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>C++之运算符重载</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>C++之运算符重载</h1><div class="post-meta text-muted"><div> 作者 <em> saltycat </em></div><div class="d-flex"><div> <span> 发表于 <em class="timeago" data-ts="1658304685" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-07-20 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1436 字"> <em>7 分钟</em>阅读</span></div></div></div><div class="post-content"><h2 id="operator-overloading"><span class="mr-2">Operator Overloading</span><a href="#operator-overloading" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Operator overloading is an example of C++ polymorphism. C++ lets you extend operator overloading to user-defined types, permitting you, say, to use the + symbol to add two objects. Again, the compiler uses the number and type of operands to determine which definition of addition to use. Overloaded operators can often make code look more natural.</p><p>This simple addition notation conceals the mechanics and emphasizes what is essential, and that is another goal of OOP.</p><p>To overload an operator, you use a special function form called an operator function. An operator function has the following form, where <em><code class="language-plaintext highlighter-rouge">op</code></em> is the symbol for the operator being overloaded:</p><p><code class="language-plaintext highlighter-rouge">operator</code><em><code class="language-plaintext highlighter-rouge">op</code></em><code class="language-plaintext highlighter-rouge">(argument list)</code></p><h2 id="overloading-an-operator"><span class="mr-2">Overloading an operator</span><a href="#overloading-an-operator" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>In this section, say that we have a class named <code class="language-plaintext highlighter-rouge">Point</code>. As is named, a <code class="language-plaintext highlighter-rouge">Point</code> class is used to describe a point, which is defined as below:</p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Point</span> <span class="p">{</span> 
<span class="nl">private:</span>
  <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">length</span><span class="p">;</span>
  
<span class="nl">public:</span>
  <span class="n">Point</span><span class="p">(</span><span class="kt">double</span> <span class="n">new_x</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">new_y</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">);</span> 
  <span class="kt">double</span> <span class="n">GetX</span><span class="p">();</span>
  <span class="kt">double</span> <span class="n">GetY</span><span class="p">();</span>
  <span class="kt">double</span> <span class="n">GetLength</span><span class="p">();</span>
  <span class="kt">void</span> <span class="n">Modify</span><span class="p">(</span><span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">new_x</span><span class="p">,</span> <span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">new_y</span><span class="p">);</span>
 
<span class="nl">private:</span>
  <span class="kt">double</span> <span class="n">CalcLength</span><span class="p">(</span><span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">xx</span><span class="p">,</span> <span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">yy</span><span class="p">);</span>
<span class="p">};</span>


<span class="c1">// definitions</span>
<span class="kt">double</span> <span class="n">Point</span><span class="o">::</span><span class="n">CalcLength</span><span class="p">(</span><span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">xx</span><span class="p">,</span> <span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">yy</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">xx</span> <span class="o">*</span> <span class="n">xx</span> <span class="o">+</span> <span class="n">yy</span> <span class="o">*</span> <span class="n">yy</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Point</span><span class="o">::</span><span class="n">Point</span><span class="p">(</span><span class="kt">double</span> <span class="n">new_x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">new_y</span><span class="p">)</span>
 <span class="o">:</span> <span class="n">x</span><span class="p">(</span><span class="n">new_x</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">new_y</span><span class="p">),</span> <span class="n">length</span><span class="p">(</span><span class="n">CalcLength</span><span class="p">(</span><span class="n">new_x</span><span class="p">,</span> <span class="n">new_y</span><span class="p">))</span> <span class="p">{}</span>

<span class="kt">double</span> <span class="n">Point</span><span class="o">::</span><span class="n">GetX</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">x</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">double</span> <span class="n">Point</span><span class="o">::</span><span class="n">GetY</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">y</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">double</span> <span class="n">Point</span><span class="o">::</span><span class="n">GetLength</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">length</span><span class="p">;</span> <span class="p">}</span>

<span class="kt">void</span> <span class="n">Point</span><span class="o">::</span><span class="n">Modify</span><span class="p">(</span><span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">new_x</span><span class="p">,</span> <span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">new_y</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">new_x</span><span class="p">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">new_y</span><span class="p">;</span>
  <span class="n">length</span> <span class="o">=</span> <span class="n">CalcLength</span><span class="p">(</span><span class="n">new_x</span><span class="p">,</span> <span class="n">new_y</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Let’s overload <code class="language-plaintext highlighter-rouge">+</code>, <code class="language-plaintext highlighter-rouge">-</code>, <code class="language-plaintext highlighter-rouge">*</code>, <code class="language-plaintext highlighter-rouge">==</code>, <code class="language-plaintext highlighter-rouge">!=</code> to this class,</p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;cmath&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Point</span> <span class="p">{</span>
<span class="nl">private:</span>
  <span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">length</span><span class="p">;</span>
  
<span class="nl">public:</span>
  <span class="n">Point</span><span class="p">(</span><span class="kt">double</span> <span class="n">new_x</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="kt">double</span> <span class="n">new_y</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">);</span>
  <span class="kt">double</span> <span class="n">GetX</span><span class="p">();</span>
  <span class="kt">double</span> <span class="n">GetY</span><span class="p">();</span>
  <span class="kt">double</span> <span class="n">GetLength</span><span class="p">();</span>
  <span class="kt">void</span> <span class="n">Modify</span><span class="p">(</span><span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">new_x</span><span class="p">,</span> <span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">new_y</span><span class="p">);</span>
  <span class="n">Point</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">Point</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
  <span class="n">Point</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">Point</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
  <span class="n">Point</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="kt">double</span> <span class="n">k</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="k">operator</span><span class="o">!=</span><span class="p">(</span><span class="n">Point</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="n">Point</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
 
<span class="nl">private:</span>
  <span class="kt">double</span> <span class="n">CalcLength</span><span class="p">(</span><span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">xx</span><span class="p">,</span> <span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">yy</span><span class="p">);</span>
<span class="p">};</span>




<span class="kt">double</span> <span class="n">Point</span><span class="o">::</span><span class="n">CalcLength</span><span class="p">(</span><span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">xx</span><span class="p">,</span> <span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">yy</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">xx</span> <span class="o">*</span> <span class="n">xx</span> <span class="o">+</span> <span class="n">yy</span> <span class="o">*</span> <span class="n">yy</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Point</span><span class="o">::</span><span class="n">Point</span><span class="p">(</span><span class="kt">double</span> <span class="n">new_x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">new_y</span><span class="p">)</span>
 <span class="o">:</span> <span class="n">x</span><span class="p">(</span><span class="n">new_x</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">new_y</span><span class="p">),</span> <span class="n">length</span><span class="p">(</span><span class="n">CalcLength</span><span class="p">(</span><span class="n">new_x</span><span class="p">,</span> <span class="n">new_y</span><span class="p">))</span> <span class="p">{}</span>

<span class="kt">double</span> <span class="n">Point</span><span class="o">::</span><span class="n">GetX</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">x</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">double</span> <span class="n">Point</span><span class="o">::</span><span class="n">GetY</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">y</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">double</span> <span class="n">Point</span><span class="o">::</span><span class="n">GetLength</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">length</span><span class="p">;</span> <span class="p">}</span>

<span class="kt">void</span> <span class="n">Point</span><span class="o">::</span><span class="n">Modify</span><span class="p">(</span><span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">new_x</span><span class="p">,</span> <span class="kt">double</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">new_y</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">new_x</span><span class="p">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">new_y</span><span class="p">;</span>
  <span class="n">length</span> <span class="o">=</span> <span class="n">CalcLength</span><span class="p">(</span><span class="n">new_x</span><span class="p">,</span> <span class="n">new_y</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Point</span> <span class="n">Point</span><span class="o">::</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">Point</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">t</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
  <span class="n">Point</span> <span class="n">sum</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">t</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">t</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">sum</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="n">Point</span><span class="o">::</span><span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">Point</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">t</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
  <span class="n">Point</span> <span class="n">ret</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">t</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">t</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="n">Point</span><span class="o">::</span><span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="kt">double</span> <span class="n">k</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
  <span class="n">Point</span> <span class="n">p</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">k</span><span class="p">,</span> <span class="n">y</span> <span class="o">*</span> <span class="n">k</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">p</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="n">Point</span><span class="o">::</span><span class="k">operator</span><span class="o">!=</span><span class="p">(</span><span class="n">Point</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">t</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">!=</span> <span class="n">t</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">y</span> <span class="o">!=</span> <span class="n">t</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">bool</span> <span class="n">Point</span><span class="o">::</span><span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="n">Point</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">t</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">t</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">==</span> <span class="n">t</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

</pre></table></code></div></div><p>The operation functions, like <code class="language-plaintext highlighter-rouge">p1 + p2</code> (<code class="language-plaintext highlighter-rouge">p1, p2</code>are both objects of <code class="language-plaintext highlighter-rouge">Point</code>), are invoked by the 1st object (in this case p1), and take the 2nd object (in this case p2) as an argument. Therefore, it’s also OK to use syntax like:</p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">Point</span> <span class="n">total</span> <span class="o">=</span> <span class="n">p1</span><span class="p">.</span><span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">p2</span><span class="p">);</span>
</pre></table></code></div></div><p>to invoke the operator + of <code class="language-plaintext highlighter-rouge">Point</code> class.</p><p>It is also worth noticing that operator functions defined in a class <strong>always have ONLY one parameter</strong>. If you pursue efficiency, you should use <code class="language-plaintext highlighter-rouge">const Point &amp;t</code> or <code class="language-plaintext highlighter-rouge">Point const &amp;t</code> as parameters, because references are more efficient.</p><blockquote><p><strong>Caution</strong></p><p>Don’t return a reference to a local variable or another temporary object. When the function terminates and the local variable or temporary object disappears, the reference becomes a reference to non-existent data.</p></blockquote><h2 id="overloading-restrictions"><span class="mr-2">Overloading Restrictions</span><a href="#overloading-restrictions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>The overloaded operator must have at least one operand that is a user-defined type.<li>You can’t use an operator in a manner that violates the syntax rules for the original operator. Such as using <code class="language-plaintext highlighter-rouge">b = *a</code>.<li>You can’t create new operator symbols.<li>You cannot overload the following operators:<img data-src="/assets/blog_res/2022-07-17-cpp-operator-overloading.assets/image-20220720200703386.png" alt="cannot be overloaded" data-proofer-ignore><li>Most of the operators can be overloaded by using either member or nonmember functions. However, you can use only member functions to overload the following operators:<img data-src="/assets/blog_res/2022-07-17-cpp-operator-overloading.assets/image-20220720200836550.png" alt="only member functions" data-proofer-ignore></ul><p><img data-src="/assets/blog_res/2022-07-17-cpp-operator-overloading.assets/image-20220720200917006.png" alt="can be be overloaded" data-proofer-ignore></p><h2 id="friends"><span class="mr-2">Friends</span><a href="#friends" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>By making a function a friend to a class, you allow the function the same access privileges that a member function of the class has.</p><p>Conceptually, <code class="language-plaintext highlighter-rouge">a = 3 * b;</code> should be the same as <code class="language-plaintext highlighter-rouge">a = b * 3;</code>. However <code class="language-plaintext highlighter-rouge">3</code> is not a <code class="language-plaintext highlighter-rouge">Point</code> object, that is to say, 3 cannot invoke the operator * which we have defined inside the <code class="language-plaintext highlighter-rouge">Point</code> class.</p><p>We can, however, take the statement <code class="language-plaintext highlighter-rouge">a = 3 * b;</code> as <code class="language-plaintext highlighter-rouge">a = operator(double const &amp;k, Point const &amp;t);</code> which is a nonmember function call. Since it’s a nonmember function, we don’t have access inside the <code class="language-plaintext highlighter-rouge">Point</code> class. Therefore, we need <code class="language-plaintext highlighter-rouge">friend</code> to offer us the access to the <code class="language-plaintext highlighter-rouge">Point</code> class.</p><p>Inside the <code class="language-plaintext highlighter-rouge">Point</code> class declaration, we need to add this declaration:</p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">friend</span> <span class="n">Point</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="kt">double</span> <span class="n">k</span><span class="p">,</span> <span class="n">Point</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">);</span>
</pre></table></code></div></div><p>And outside the class, we need to define it, like this:</p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">Point</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="kt">double</span> <span class="n">k</span><span class="p">,</span> <span class="n">Point</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span> 
  <span class="k">return</span> <span class="n">p</span> <span class="o">*</span> <span class="n">k</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Pay attention to that there is <strong>NO</strong> <code class="language-plaintext highlighter-rouge">friend</code> in the definition. And since it’s not a member function of the <code class="language-plaintext highlighter-rouge">Point</code> class, you <strong>DO NOT</strong> have to add the scope specifier <code class="language-plaintext highlighter-rouge">Point::</code> in the definition.</p><p>With the nonmember overloaded operator function, the left operand of an operator expression corresponds to the first argument of the operator function, and the right operand corresponds to the second argument.</p><h2 id="overloading-the-operator"><span class="mr-2">Overloading the « Operator</span><a href="#overloading-the-operator" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>The <code class="language-plaintext highlighter-rouge">ostream</code> class overloads the operator <code class="language-plaintext highlighter-rouge">&lt;&lt;</code>, converting it into an output tool. Recall that <code class="language-plaintext highlighter-rouge">cout</code> is an <code class="language-plaintext highlighter-rouge">ostream</code> object and that it is smart enough to recognize all the basic C++ types.</p><p>So one way to teach <code class="language-plaintext highlighter-rouge">cout</code> to recognize a Time object is to add a new function operator definition to the <code class="language-plaintext highlighter-rouge">ostream</code> class declaration. But it’s a dangerous idea to alter the <code class="language-plaintext highlighter-rouge">iostream</code> file and mess around with a standard interface. Instead, use the Time class declaration to teach the Time class how to use <code class="language-plaintext highlighter-rouge">cout</code>.</p><h3 id="the-first-version"><span class="mr-2">The First Version</span><a href="#the-first-version" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>To teach the Time class to use <code class="language-plaintext highlighter-rouge">cout</code>, you can use a friend function. Why? Because a statement like the following uses two objects, with the <code class="language-plaintext highlighter-rouge">ostream </code>class object (<code class="language-plaintext highlighter-rouge">cout</code>) first: <code class="language-plaintext highlighter-rouge">cout &lt;&lt; trip;</code></p><p>If you use a Time member function to overload <code class="language-plaintext highlighter-rouge">&lt;&lt;</code>, the Time object would come first, as it did when you overloaded the * operator with a member function. That means you would have to use the <code class="language-plaintext highlighter-rouge">&lt;&lt;</code> operator this way:</p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">trip</span> <span class="o">&lt;&lt;</span> <span class="n">cout</span><span class="p">;</span> <span class="c1">// if operator&lt;&lt;() were a Time member function</span>
</pre></table></code></div></div><p>Therefore it is extremely reasonable to use a friend function to overload <code class="language-plaintext highlighter-rouge">&lt;&lt;</code>, like:</p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span> <span class="o">&amp;</span><span class="n">os</span><span class="p">,</span> <span class="n">Point</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">"("</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="s">")"</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>The call <code class="language-plaintext highlighter-rouge">cout &lt;&lt; trip</code> should use the <code class="language-plaintext highlighter-rouge">cout</code> object itself, not a copy, so the function passes the object as a reference instead of by value. Thus, the expression <code class="language-plaintext highlighter-rouge">cout &lt;&lt; trip</code> causes <code class="language-plaintext highlighter-rouge">os</code> to be an alias for <code class="language-plaintext highlighter-rouge">cout</code>, and the expression <code class="language-plaintext highlighter-rouge">cerr &lt;&lt; trip</code> causes <code class="language-plaintext highlighter-rouge">os</code> to be an alias for<code class="language-plaintext highlighter-rouge"> cerr</code>. The Time object can be passed by value or by reference because either form makes the object values available to the function. Again, passing by reference uses less memory and time than passing by value.</p><h3 id="the-second-version"><span class="mr-2">The Second Version</span><a href="#the-second-version" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>But the first implementation doesn’t allow you to combine the redefined « operator with the ones <code class="language-plaintext highlighter-rouge">cout</code> normally uses:</p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Trip time: "</span> <span class="o">&lt;&lt;</span> <span class="n">trip</span> <span class="o">&lt;&lt;</span> <span class="s">" (Tuesday)</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="c1">// can't do</span>
</pre></table></code></div></div><p>You can take the same approach with the friend function. You just revise the <code class="language-plaintext highlighter-rouge">operator&lt;&lt;()</code> function so that it returns a reference to an <code class="language-plaintext highlighter-rouge">ostream</code> object:</p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">ostream</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span> <span class="o">&amp;</span><span class="n">os</span><span class="p">,</span> <span class="n">Point</span> <span class="k">const</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">"("</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="s">")"</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">os</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Since you cannot overload functions that is only differed in return type, it’s highly recommended to use the second version to overload the operator <code class="language-plaintext highlighter-rouge">&lt;&lt;</code>, because it makes more sense than the first one.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/c/'>C++</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=C%2B%2B%E4%B9%8B%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD+-+sa1tycat&url=%2Fposts%2Fcpp-operator-overloading%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=C%2B%2B%E4%B9%8B%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD+-+sa1tycat&u=%2Fposts%2Fcpp-operator-overloading%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2Fcpp-operator-overloading%2F&text=C%2B%2B%E4%B9%8B%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD+-+sa1tycat" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/test/">test</a><li><a href="/posts/stack-combinatory/">1，2，3，4 依次入栈的出栈排列问题</a><li><a href="/posts/time-complexity/">时间复杂度</a><li><a href="/posts/binary-exponentiation/">快速幂</a><li><a href="/posts/html-all-in-one/">HTML一次通</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%E5%9B%BE%E8%AE%BA/">图论</a> <a class="post-tag" href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/">字符串</a> <a class="post-tag" href="/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/">并查集</a> <a class="post-tag" href="/tags/%E6%9C%80%E7%9F%AD%E8%B7%AF/">最短路</a> <a class="post-tag" href="/tags/%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/">格式化输出</a> <a class="post-tag" href="/tags/css/">CSS</a> <a class="post-tag" href="/tags/dfs/">DFS</a> <a class="post-tag" href="/tags/html/">HTML</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/jquery/">jQuery</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/cpp-function/"><div class="card-body"> <em class="timeago small" data-ts="1657624837" > 2022-07-12 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>C++之函数</h3><div class="text-muted small"><p> Function Declaration &amp;amp; Definition A C++ function has two parts: Function declaration（函数声明） Function definition（函数定义） The declaration includes the function’s name, return type, and any ...</p></div></div></a></div><div class="card"> <a href="/posts/cpp-vector/"><div class="card-body"> <em class="timeago small" data-ts="1657624837" > 2022-07-12 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>C++之vector</h3><div class="text-muted small"><p> vector 定义 vector 是一个长度不定的数组，要使用它，首先要 include &amp;lt;vector&amp;gt;，然后按照 std::vector&amp;lt;elementType&amp;gt; name; 这样的形式进行定义，如：std::vector&amp;lt;std::string&amp;gt; students;。 值得一提的是，可以通过 {} 来初始化 vector 的值，如：std::ve...</p></div></div></a></div><div class="card"> <a href="/posts/cpp-classes-and-objects/"><div class="card-body"> <em class="timeago small" data-ts="1657705860" > 2022-07-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>C++之类与对象</h3><div class="text-muted small"><p> Class The class（类） serves as a blueprint for objects（对象）, which are instances（实例） of the class (just like age is an instance of int). An object gets characteristics and behaviors from its class. ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/cpp-style-guide/" class="btn btn-outline-primary" prompt="上一篇"><p>C++之风格指南</p></a> <a href="/posts/ctf-web-schedule/" class="btn btn-outline-primary" prompt="下一篇"><p>【转载】CTF web安全45天入门学习路线</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">saltycat</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%E5%9B%BE%E8%AE%BA/">图论</a> <a class="post-tag" href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/">字符串</a> <a class="post-tag" href="/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/">并查集</a> <a class="post-tag" href="/tags/%E6%9C%80%E7%9F%AD%E8%B7%AF/">最短路</a> <a class="post-tag" href="/tags/%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/">格式化输出</a> <a class="post-tag" href="/tags/css/">CSS</a> <a class="post-tag" href="/tags/dfs/">DFS</a> <a class="post-tag" href="/tags/html/">HTML</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/jquery/">jQuery</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
